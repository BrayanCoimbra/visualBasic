DROP TABLE IF EXISTS SUPMALOTE;
DROP TABLE IF EXISTS SUPFUNCIONARIO;
DROP TABLE IF EXISTS SUPDESCRICAO;

DROP SEQUENCE IF EXISTS SEQCODMALOTE;
DROP SEQUENCE IF EXISTS SEQCODFUNCIONARIO;
DROP SEQUENCE IF EXISTS SEQCODDESCRICAO;

CREATE TABLE SUPFUNCIONARIO (
  SEQCODFUNCIONARIO BIGINT NOT NULL,
  MATRICULA INTEGER NOT NULL,
  NOME VARCHAR(150) NOT NULL,
  DTNASC DATE NOT NULL,
  CONSTRAINT PK_SUPFUNCIONARIO PRIMARY KEY (SEQCODFUNCIONARIO)
);
CREATE SEQUENCE SEQCODFUNCIONARIO MINVALUE 1 START WITH 1 INCREMENT BY 1;

--'========================================================'
--'========================================================'

CREATE TABLE SUPDESCRICAO (
  SEQCODDESCRICAO BIGINT NOT NULL,
  DESCRICAO VARCHAR(150) NOT NULL,
  CONSTRAINT PK_SUPDESCRICAO PRIMARY KEY (SEQCODDESCRICAO)
);
CREATE SEQUENCE SEQCODDESCRICAO MINVALUE 1 START WITH 1 INCREMENT BY 1;

--'========================================================'
--'========================================================'

CREATE TABLE SUPMALOTE (
  SEQCODMALOTE BIGINT NOT NULL,
  CODFUNCIONARIO BIGINT NOT NULL,
  DTENVIO DATE NOT NULL,
  DTCONFERENCIA DATE NULL, -- NOT NULL removido para aceitar datas faltantes
  SITUACAOMALOTE VARCHAR(150) NOT NULL,
  CODDESCRICAO BIGINT NOT NULL,
  CONSTRAINT PK_SUPMALOTE_SEQCODMALOTE PRIMARY KEY (SEQCODMALOTE),
  CONSTRAINT FK_SUPMALOTE_CODFUNCIONARIO FOREIGN KEY (CODFUNCIONARIO) REFERENCES SUPFUNCIONARIO (SEQCODFUNCIONARIO),
  CONSTRAINT FK_SUPMALOTE_CODDESCRICAO FOREIGN KEY (CODDESCRICAO) REFERENCES SUPDESCRICAO (SEQCODDESCRICAO)
);
CREATE SEQUENCE SEQCODMALOTE MINVALUE 1 START WITH 1 INCREMENT BY 1;

--'========================================================'
--'========================================================'

INSERT INTO SUPDESCRICAO (SEQCODDESCRICAO, DESCRICAO) VALUES
(1, 'Enviado'),
(2, 'Preprando para envio'),
(3, 'Recebido'),
(4, 'Devolvido'),
(5, 'Em análise');

INSERT INTO SUPFUNCIONARIO (SEQCODFUNCIONARIO, MATRICULA, NOME, DTNASC) VALUES
(1, 1, 'Adalberto Antunes Neto', '1934-02-01'),
(2, 2, 'Giovane Mello''s da Silv@', '1923-02-04'),
(3, 3, 'Arthur Pereira Sóllis', '1972-12-09'),
(4, 77, 'Jurema das& Luzes', '1944-07-30'),
(5, 123, 'Marta Luz de Fialh''o', '1981-04-15'),
(6, 58, 'Vitor Hugo.> Simões', '1989-09-17'),
(7, 4, 'Aguinaldo Rick', '2003-08-27'),
(8, 7, 'Luiz Pereira Santos Filho', '2010-02-28'),
(9, 99, 'Luciana Martins da Rocha', '1974-11-29'),
(10, 236, 'Abraham Lincoln', '1969-12-25'),
(11, 500, 'Martin Luther King Jr.', '1980-07-15'),
(12, 34, 'Joana D''arc', '1912-10-01');

INSERT INTO SUPMALOTE (SEQCODMALOTE, CODFUNCIONARIO, DTENVIO, DTCONFERENCIA, SITUACAOMALOTE, CODDESCRICAO) VALUES
(1, 5, '2022-10-01', '2023-03-06', 'Enviado', 1),
(2, 1, '2021-07-04', '2022-12-30', 'Recebido', 3),
(3, 12, '2023-07-12', NULL, 'Enviado', 1),
(5, 2, '1999-02-03', '1999-02-01', 'Devolvido', 4),
(6, 12, '1999-02-04', '2023-03-08', 'Preprando para envio', 2),
(8, 6, '1994-04-04', '2023-03-08', 'Preprando para envio', 2),
(9, 7, '2023-12-01', NULL, 'Em análise', 5),
(10, 9, '2023-12-02', '1999-04-09', 'Enviado', 1);
